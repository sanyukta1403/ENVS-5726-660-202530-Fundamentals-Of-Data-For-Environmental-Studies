import pandas as pd #to load and manipulate data
import seaborn as sns #to create charts
import matplotlib.pyplot as plt #to control figure details, titles, spacing, etc

sns.set_theme(style="whitegrid") #tells Seaborn to use a clean style with white background + gridlines

# read dataset into dataframe 
df = pd.read_csv('/Users/sanyuktasingh/Desktop/data class/ENVS-5726-660-202530-Fundamentals-Of-Data-For-Environmental-Studies/final_project/joined_vietnam_waterrisk_cleaned.csv', encoding="utf-8")

df["Factory Type"] = df["Factory Type"].str.strip().str.upper() #removes trailing spaces to prevent mismatched category names & converts everything to uppercase for consistency

#combine two categories into one category (finished goods and finished goods - components both fall under finished goods)
df["Category"] = df["Factory Type"].replace({
    "FINISHED GOODS": "Finished Goods",
    "FINISHED GOODS - COMPONENTS": "Finished Goods",
    "MATERIALS": "Materials"
}) #gives two final groups for plotting

df = df[df["Category"].isin(["Finished Goods", "Materials"])] #filter dataset so the chart uses only the two categories


#create barplot with colors and visual styling defined for readability
g = sns.catplot(
    data=df, kind="bar",
    x="Category", y="bws_score", hue="Category",
    errorbar=None, palette="dark", alpha=.6, height=6
)

g.ax.set_ylim(0, 5) #make the y-axis go up to 5

g.set_axis_labels("", "Baseline Water Stress (Score)") #label axis 


title = "Baseline Water Stress (BWS)\nFinished Goods vs. Materials – Nike Vietnam Supply Chain" #title for chart; line 1 is metric name; line 2 is context
g.fig.suptitle(title, fontsize=14) # .suptitle() places the title above the entire figure
g.fig.subplots_adjust(top=0.88) #adjust spacing so title doesn’t overlap

plt.show()